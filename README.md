# Todo App with Supabase

This is a Todo list application built with **Next.js**, **Supabase**, and **Tailwind CSS**. The app allows users to manage tasks, assign them to other users, set due dates, and filter tasks based on certain criteria. Additionally, real-time notifications are provided when tasks are assigned.

## Features

### 1. **Task Assignment**
   - Users can now assign tasks to other users in the app.
   - When creating a new task, the user can select another user to assign the task to from a dropdown menu.
   - Assigned tasks will be visible to the user they're assigned to.

### 2. **Due Date**
   - Each task can have a **due date** associated with it.
   - The due date can be set when creating or updating a task.
   - Tasks with due dates are displayed with the formatted date.

### 3. **Task Filters**
   - You can filter tasks based on the following criteria:
     - **Assigned to Me**: Displays only the tasks assigned to the logged-in user.
     - **Due Today**: Shows tasks that are due today.
     - **Overdue**: Displays tasks that are past due and not yet marked as complete.
   - The filter buttons can be found on the main task list page.

### 4. **Real-Time Notifications**
   - Users will receive **real-time notifications** when a new task is assigned to them.
   - Notifications appear dynamically, so users can be alerted of new tasks immediately after they are assigned.
   - Notifications will show up with a message like: "You were assigned a new task: 'Task Name'."

## Supabase Setup

This project leverages **Supabase** to provide backend services, including user authentication, a PostgreSQL database, and real-time features.

### 1. **Database Structure**:
   - The app stores tasks in a PostgreSQL database hosted by Supabase. Each task has:
     - `task`: The task description.
     - `is_complete`: A boolean indicating whether the task is completed.
     - `due_date`: The date by which the task should be completed.
     - `assigned_to`: The user to whom the task is assigned.
   
   - Additionally, there is a `users` table provided by Supabase for user management, using the `auth.users` table for authentication.

### 2. **SQL Updates**:
   To enable the **task assignment**, **due date**, and **real-time** features, the following updates were made to the SQL schema in the Supabase project:

   - **Task Table**: The original `todos` table was extended with two new columns: `assigned_to` (which references `auth.users` to assign tasks to users) and `due_date` (which stores the due date of the task).
   
     ```sql
     create table todos (
       id bigint generated by default as identity primary key,
       user_id uuid references auth.users not null,
       task text check (char_length(task) > 3),
       is_complete boolean default false,
       due_date date, -- New column for task due date
       assigned_to uuid references auth.users, -- New column for task assignment
       inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
     );
     ```

   - **Row-Level Security (RLS)**:
     The app uses **Row-Level Security (RLS)** to ensure that users can only view and interact with their own tasks. Policies were set up to allow users to:
     - **Insert** new tasks (with a check that the task is created by the logged-in user).
     - **Select** (view) tasks that are assigned to them.
     - **Update** and **Delete** their own tasks.

     Here's the SQL policy setup for RLS:

     ```sql
     alter table todos enable row level security;

     -- Policy for creating tasks
     create policy "Individuals can create todos." on todos for
         insert with check ((select auth.uid()) = user_id);

     -- Policy for viewing tasks
     create policy "Individuals can view their own todos." on todos for
         select using ((select auth.uid()) = user_id);

     -- Policy for updating tasks
     create policy "Individuals can update their own todos." on todos for
         update using ((select auth.uid()) = user_id);

     -- Policy for deleting tasks
     create policy "Individuals can delete their own todos." on todos for
         delete using ((select auth.uid()) = user_id);
     ```

   These policies ensure that tasks can only be created, updated, or viewed by the users to whom they belong, and tasks can only be assigned to authenticated users.

### 3. **Real-Time Notifications**:
   Supabase's real-time functionality is used to notify users when a task is assigned to them. Real-time listeners are set up to detect when a task is added to the `todos` table and if the task is assigned to the logged-in user.

   The real-time functionality is integrated into the frontend, and the notifications are displayed dynamically when a task is assigned.

## Installation

1. **Clone the repository:**

   ```bash
   git clone https://github.com/your-username/todo-app.git
   cd todo-app

2. **Install dependencies:**

bash
Copy
Edit
npm install
**3. Set up your Supabase project:**

Go to Supabase and create a new project.
Set up your database and tables following the instructions in the "Todo List Quickstart" from Supabase documentation.
Create the required tables and columns as described above.
Set up Row-Level Security (RLS) and the policies using the SQL statements provided in this README.

**4. Create .env.local file: Create a .env.local file in the root directory of the project with the following content:**

NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

**5. Run the app:**

npm run dev

**6. Open the app in your browser at http://localhost:3000.**

How to Use
Create a Task:

Enter a task name in the input field.
Select a user from the dropdown menu to assign the task.
Set a due date using the date picker.
Click "Add Task" to save the task.
Filter Tasks:

Use the filter buttons at the top of the task list:
Assigned to Me: Shows tasks that are assigned to you.
Due Today: Shows tasks that are due today.
Overdue: Shows tasks that are past due.
Receive Notifications:

Whenever a task is assigned to you, you will receive a real-time notification.
Notifications will appear immediately without needing to refresh the page.
Technologies Used
Next.js: A React framework for building production-grade web applications.
Supabase: An open-source backend-as-a-service platform providing a hosted Postgres database and authentication.
Tailwind CSS: A utility-first CSS framework used for styling the app.
Contributing

### Key Sections Explained:

1. **Supabase Setup**: 
   This section explains how you have leveraged Supabase for user authentication and real-time features. It also details the database structure with the new columns for task assignments and due dates.

2. **SQL Updates**: 
   This section provides the exact SQL code you used to update the database schema, including the addition of the `assigned_to` and `due_date` columns, as well as the Row-Level Security (RLS) policies to ensure proper access control.

3. **Real-Time Notifications**: 
   Here, you mention how real-time notifications work, allowing users to receive updates immediately when tasks are assigned to them.
